!async function(){const e=await async function(e,t="episodes"){const n=await fetch(`https://api.tvmaze.com/shows/${e}/${t}`);return await n.json()}(527),t=e.at(e.length-1).season,n=e.at(0).airdate.slice(0,4),a=document.querySelector(".tvshow-title"),s=document.querySelector(".airdate"),i=document.querySelector(".seasons-number"),r=document.querySelector(".season-dropdown"),c=document.querySelector(".episode-dropdown"),o=document.querySelector(".search-episode"),l=document.querySelector(".search-results"),d=document.querySelector(".results"),u=document.querySelector(".tv-show-row");function m(e){e.children.item(0).children.item(0).classList.add("active"),e.addEventListener("click",(t=>{t.target.getAttribute("value")&&Object.values(e.childNodes).filter((e=>"#text"!==e.nodeName)).map((e=>{e.children.item(0).classList.remove("active"),e.children.item(0).getAttribute("value")===t.target.getAttribute("value")&&e.children.item(0).classList.add("active")}))}))}function f(e,t=1){c.innerHTML="",e.filter((e=>e.season===t)).map((e=>{const t=`\n                <li>\n                    <a class="dropdown-item" href="#" value=${h(e)}>\n                    ${h(e)} - ${e.name} \n                    </a>\n                </li>\n            `;c.insertAdjacentHTML("beforeend",t)}))}function v(e){return e.slice(3,-4)}function g(t,n=1){u.innerHTML="";const a=function(e,t){let n=0;for(let a=0;a<t-1;a++)n=Object.keys(e)[a].slice(-1)*Object.values(e)[a];return n}(p(e),n);t.slice(a,p(e)[`season${n}`]+a).map((e=>{let t=e.summary;e.summary.length>130&&(t=`${v(e.summary).slice(0,130)}...`);const n=`\n                <div class="col my-2">\n                    <div class="card h-100">\n                        <figure>\n                            <a href="${e.url}">\n                                <img\n                                src="${e.image.medium}"\n                                class="card-img-top"\n                                alt="${e.name}">\n                            </a>\n                            <figcaption class="figcaption">\n                                ${h(e)}\n                            </figcaption>\n                        </figure>\n                        <div class="card-body">\n                            <h5 class="card-title">\n                                ${e.name}\n                            </h5>\n                            <p class="card-text text-start">\n                                ${t}\n                            </p>\n                        </div>\n                    </div>\n                </div>`;u.insertAdjacentHTML("beforeend",n)}))}function p(e){const n={};let a=0;for(let s=0;s<=t;s++){for(let t=0;t<=e.length;t++)e[t]?.season===s&&(n[`season${s}`]=++a);a=0}return n}function h(e){const{season:t,number:n}=e;return`S${t.toString().padStart(2,"0")}E${n.toString().padStart(2,"0")}`}a.textContent="The Sopranos",s.textContent=n,i.textContent=t,function(e){r.innerHTML="";const t=p(e);Object.keys(t).map((e=>{const t=`\n                <li>\n                    <a class="dropdown-item" href="#" value=${e.slice(-1)}>\n                        Season ${e.slice(-1)}\n                    </a>\n                </li>\n            `;r.insertAdjacentHTML("beforeend",t)}))}(e),f(e),m(r),m(c),g(e),r.addEventListener("click",(t=>{g(e,+t.target.getAttribute("value")),f(e,+t.target.getAttribute("value"))})),c.addEventListener("click",(t=>{var n,a;n=e,a=t.target.getAttribute("value"),n.filter((e=>{if(h(e)===a){u.innerHTML="";let t=e.summary;e.summary.length>130&&(t=`${v(e.summary).slice(0,130)}...`);const n=`\n                    <div class="col my-2">\n                        <div class="card h-100">\n                            <figure>\n                                <a href="${e.url}">\n                                    <img\n                                    src="${e.image.medium}"\n                                    class="card-img-top"\n                                    alt="${e.name}">\n                                </a>\n                                <figcaption class="figcaption">\n                                    ${h(e)}\n                                </figcaption>\n                            </figure>\n                            <div class="card-body">\n                                <h5 class="card-title">\n                                    ${e.name}\n                                </h5>\n                                <p class="card-text text-start">\n                                    ${t}\n                                </p>\n                            </div>\n                        </div>\n                    </div>`;u.insertAdjacentHTML("beforeend",n)}}))})),o.addEventListener("input",(t=>{t.preventDefault(),function(t){t&&g(e);const n=[];e.slice(0).map((e=>{(v(e.summary).toLowerCase().includes(t.toLowerCase())||e.name.toLowerCase().includes(t.toLowerCase().trim()))&&n.push(e)}));const a=Array.from(r.children).map((e=>{let t=0;return e.children.item(0).classList.contains("active")&&(t=e.children.item(0).getAttribute("value")),t})).filter((e=>e)).at(0);n&&o.value?(l.classList.remove("d-none"),d.textContent=n.length,function(e){u.innerHTML="",e.map((e=>{let t=e.summary;e.summary.length>130&&(t=`${v(e.summary).slice(0,130)}...`);const n=`\n                <div class="col my-2">\n                    <div class="card h-100">\n                        <figure>\n                            <a href="${e.url}">\n                                <img\n                                src="${e.image.medium}"\n                                class="card-img-top"\n                                alt="${e.name}">\n                            </a>\n                            <figcaption class="figcaption">\n                                ${h(e)}\n                            </figcaption>\n                        </figure>\n                        <div class="card-body">\n                            <h5 class="card-title">\n                                ${e.name}\n                            </h5>\n                            <p class="card-text text-start">\n                                ${t}\n                            </p>\n                        </div>\n                    </div>\n                </div>`;u.insertAdjacentHTML("beforeend",n)}))}(n)):(g(n,a),l.classList.add("d-none"))}(t.target.value)}))}();