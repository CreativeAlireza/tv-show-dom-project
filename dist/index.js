!async function(){const e=await async function(e,t="episodes"){const n=await fetch(`https://api.tvmaze.com/shows/${e}/${t}`);return await n.json()}(527),t=e.at(e.length-1).season,n=e.at(0).airdate.slice(0,4),a=document.querySelector(".tvshow-title"),s=document.querySelector(".airdate"),c=document.querySelector(".seasons-number"),r=(document.querySelector(".season-dropdown"),document.querySelector(".card-title"),document.querySelector(".season-dropdown")),i=document.querySelector(".episode-dropdown"),o=document.querySelector(".search-episode"),l=document.querySelector(".search-results"),d=document.querySelector(".results");function u(e){e.children.item(0).children.item(0).classList.add("active"),e.addEventListener("click",(t=>{t.target.getAttribute("value")&&Object.values(e.childNodes).filter((e=>"#text"!==e.nodeName)).map((e=>{e.children.item(0).classList.remove("active"),e.children.item(0).getAttribute("value")===t.target.getAttribute("value")&&e.children.item(0).classList.add("active")}))}))}function m(e,t=1){i.innerHTML="",e.filter((e=>e.season===t)).map((e=>{const t=`\n                <li>\n                    <a class="dropdown-item" href="#" value=${p(e)}>\n                    ${p(e)} - ${e.name} \n                    </a>\n                </li>\n            `;i.insertAdjacentHTML("beforeend",t)}))}function f(e){return e.slice(3,-4)}function v(t,n=1){const a=document.querySelector(".tv-show-row");a.innerHTML="";const s=function(e,t){let n=0;for(let a=0;a<t-1;a++)n=Object.keys(e)[a].slice(-1)*Object.values(e)[a];return n}(g(e),n);t.slice(s,g(e)[`season${n}`]+s).map((e=>{const t=`\n                <div class="col my-2">\n                    <div class="card h-100">\n                        <figure>\n                            <a href="${e.url}">\n                                <img\n                                src="${e.image.medium}"\n                                class="card-img-top"\n                                alt="${e.name}">\n                            </a>\n                            <figcaption class="figcaption">\n                                ${p(e)}\n                            </figcaption>\n                        </figure>\n                        <div class="card-body">\n                            <h5 class="card-title">\n                                ${e.name}\n                            </h5>\n                            <p class="card-text text-start">\n                                ${f(e.summary)}\n                            </p>\n                        </div>\n                    </div>\n                </div>`;a.insertAdjacentHTML("beforeend",t)}))}function g(e){const n={};let a=0;for(let s=0;s<=t;s++){for(let t=0;t<=e.length;t++)e[t]?.season===s&&(n[`season${s}`]=++a);a=0}return n}function p(e){const{season:t,number:n}=e;return`S${t.toString().padStart(2,"0")}E${n.toString().padStart(2,"0")}`}a.textContent="The Sopranos",s.textContent=n,c.textContent=t,function(e){r.innerHTML="";const t=g(e);Object.keys(t).map((e=>{const t=`\n                <li>\n                    <a class="dropdown-item" href="#" value=${e.slice(-1)}>\n                        Season ${e.slice(-1)}\n                    </a>\n                </li>\n            `;r.insertAdjacentHTML("beforeend",t)}))}(e),m(e),u(r),u(i),v(e),r.addEventListener("click",(t=>{v(e,+t.target.getAttribute("value")),m(e,+t.target.getAttribute("value"))})),i.addEventListener("click",(t=>{var n,a;n=e,a=t.target.getAttribute("value"),n.filter((e=>{if(p(e)===a){const t=document.querySelector(".tv-show-row");t.innerHTML="";const n=`\n                    <div class="col my-2">\n                        <div class="card h-100">\n                            <figure>\n                                <a href="${e.url}">\n                                    <img\n                                    src="${e.image.medium}"\n                                    class="card-img-top"\n                                    alt="${e.name}">\n                                </a>\n                                <figcaption class="figcaption">\n                                    ${p(e)}\n                                </figcaption>\n                            </figure>\n                            <div class="card-body">\n                                <h5 class="card-title">\n                                    ${e.name}\n                                </h5>\n                                <p class="card-text text-start">\n                                    ${f(e.summary)}\n                                </p>\n                            </div>\n                        </div>\n                    </div>`;t.insertAdjacentHTML("beforeend",n)}}))})),o.addEventListener("input",(t=>{t.preventDefault(),function(t){t&&v(e);const n=[];e.slice(0).map((e=>{(f(e.summary).toLowerCase().includes(t.toLowerCase())||e.name.toLowerCase().includes(t.toLowerCase().trim()))&&n.push(e)}));const a=Array.from(r.children).map((e=>{let t=0;return e.children.item(0).classList.contains("active")&&(t=e.children.item(0).getAttribute("value")),t})).filter((e=>e)).at(0);n&&o.value?(l.classList.remove("d-none"),d.textContent=n.length,function(e){const t=document.querySelector(".tv-show-row");t.innerHTML="",e.map((e=>{const n=`\n                <div class="col my-2">\n                    <div class="card h-100">\n                        <figure>\n                            <a href="${e.url}">\n                                <img\n                                src="${e.image.medium}"\n                                class="card-img-top"\n                                alt="${e.name}">\n                            </a>\n                            <figcaption class="figcaption">\n                                ${p(e)}\n                            </figcaption>\n                        </figure>\n                        <div class="card-body">\n                            <h5 class="card-title">\n                                ${e.name}\n                            </h5>\n                            <p class="card-text text-start">\n                                ${f(e.summary)}\n                            </p>\n                        </div>\n                    </div>\n                </div>`;t.insertAdjacentHTML("beforeend",n)}))}(n)):(v(n,a),l.classList.add("d-none"))}(t.target.value)}))}();